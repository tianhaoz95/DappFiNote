version: '3'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - /var/run/docker.sock:/var/run/docker-host.sock
      - ..:/workspace:cached
    entrypoint: /usr/local/share/docker-init.sh
    command: sleep infinity
    user: vscode
    depends_on:
      - ganache
  ganache:
    image: trufflesuite/ganache:latest
    ports:
      - "7545:8545"
    command: --port 8545
